<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Escalation via Executable Files</title>
</head><body><b><u><div style="text-align: center"><span style="font-size: 20pt">Escalation via Executable Files</span></div></u></b><br/>
<br/>
<br/>
<br/>
<span style="font-size: 15pt">We need to pass a file from the Windows machine to our Kali machine:<br/>
We can do that with a <b>Python (FTP) / Windows (FTP) combo:</b><br/>
<img src="1.png" /><br/>
<br/>
<br/>
Use SHIFT+RIGHT CLICK to show the command line option<br/>
<img src="1 2.png" /><br/>
<br/>
We are sending the windows_service.c<br/>
<img src="1 3.png" /><br/>
<br/>
<br/>
Now in linux, we are going to edit the file, and edit the system command:<br/>
<b>Before:</b><br/>
</span><img src="1 4.png" /><br/>
<br/>
<b><span style="font-size: 15pt">After:<br/>
(in this case, use is an username!!)<br/>
</span></b><img src="1 5.png" /><br/>
<br/>
<br/>
<span style="font-size: 15pt"><br/>
Save the file and now compile with mingwc:<br/>
<b>x86_64-w64-mingw32-gcc windows_service.c -o x.exe</b><br/>
(NOTE: if this is not installed, use 'sudo apt install gcc-mingw-w64') <br/>
</span><img src="1 6.png" /><span style="font-size: 15pt"><br/>
</span><span style="font-size: 15pt"><br/>
<br/>
Now, pass this executable to the windows machine.<br/>
You can use whatever <i><b>combo</b></i>&nbsp;you like to do that<br/>
<br/>
<br/>
<br/>
Now, that is the crucial part.<br/>
We are going to overwrite the executable used by the service<br/>
</span><img src="1 7.png" /><br/>
<br/>
<br/>
<br/>
<b><span style="font-size: 15pt">To run the service, we can use the sc command:</span><br/>
</b><img src="1 8.png" /><b><br/>
</b><b><br/>
</b><img src="1 9.png" /></body></html>